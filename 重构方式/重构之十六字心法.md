## [重构之十六字心法](http://insights.thoughtworkers.org/principles-of-refactoring/?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io)

#### 合格的重构
* 消除味道：一个重构应该是从识别一个坏味道（Bad Smell）开始，以消除一个坏味道结束，任何不以消除坏味道为目标的重构都是耍流氓。

* 始终工作：即重构定义中的“在不改变软件可观察行为的前提下”，说白了就是重构过程不能破坏甚至改变软件外在功能。

* 持续集成：不需要为重构单建分支，重构过程可以做到Feature开发在同一分支上持续集成持续交付。

* 随时中止：例如一个方法重命名，需要修改100个调用点，当改到50个的时候有个紧急的Feature，我可以随时暂停重构，立即切换到Feature开发上，且不需要回滚已做的重构。
断点续传：还是上边的例子，假如我已经完成了紧急Feature的开发，可以随时继续之前的重构，完成剩下50个调用点的重命名。

* 过程可逆：对于重构，经常有人会问：你怎么保证重构就会更好而不是更坏呢？重构的伟大就在于他跳出了对错之争，将关注点放到如何快速平滑安全的变化上，当然也包括反向重构。所以我的回答是：无法保证，但是我可以一分钟就重构回来。如果仔细看，《重构》书里的所有重构手法都是双向的，比如“Extract Method”和“Inline Method”。

**好的重构应该像一边开车一边换轮胎一样，保证系统随时可工作的前提下，还可以对其结构做出安全高效的调整。**

#### 重构的秘诀:(重构-改善既有代码的设计)
  * 旧的不变

  * 新的创建

  * 一步切换

    这个切换过程是最容易暴露出问题的，所以越简单越快速越好，一旦出现了问题，就快速的切换回旧的结构后再慢慢排查问题，从而实时保证系统的可用性。

  * 旧的再见